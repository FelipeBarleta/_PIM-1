@model _PIM.Models.Venda

@{
    ViewData["Title"] = "Finalizar Compra";
}

<h2>Finalizar Compra</h2>

<form asp-action="FinalizarCompra" method="post">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">
            @TempData["SuccessMessage"]
        </div>
    }

    <!-- Informações do Cliente -->
    <div class="form-group">
        <label for="Endereco">Endereço</label>
        <input type="text" class="form-control" id="Endereco" name="Endereco" placeholder="Digite seu endereço" required />
    </div>

    <div class="form-group">
        <label for="Bairro">Bairro</label>
        <input type="text" class="form-control" id="Bairro" name="Bairro" placeholder="Digite seu bairro" required />
    </div>

    <div class="form-group">
        <label for="Cidade">Cidade</label>
        <input type="text" class="form-control" id="Cidade" name="Cidade" placeholder="Digite sua cidade" required />
    </div>

    <div class="form-group">
        <label for="CEP">CEP</label>
        <input type="text" class="form-control" id="CEP" name="CEP" placeholder="Digite seu CEP" required />
    </div>

    <!-- Método de Pagamento -->
    <div class="form-group">
        <label for="MetodoPagamento">Método de Pagamento</label>
        <select class="form-control" id="MetodoPagamento" name="MetodoPagamento" required>
            <option value="Pix">Pix</option>
            <option value="Credito">Crédito</option>
            <option value="Debito">Débito</option>
        </select>
    </div>

    <!-- Mostrar Itens da Compra -->
    <h3>Itens da Compra</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Produto</th>
                <th>Preço Unitário</th>
                <th>Quantidade</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {                
                @foreach (var item in Model.ItensVenda)
                {
                    <tr>
                        <td>@item.Produto?.Nome</td>
                        <td>@item.PrecoUnitario.ToString("C")</td>
                        <td>@item.Quantidade</td>
                        <td>@(item.PrecoUnitario * item.Quantidade).ToString("C")</td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center">Nenhum produto encontrado.</td>
                </tr>
            }
        </tbody>
    </table>
   


    <div>
        <strong>Total da Venda:</strong> @Model.Total.ToString("C")
    </div>

    <div>
        <button type="submit" class="btn btn-primary">Finalizar Compra</button>
    </div>
</form>
